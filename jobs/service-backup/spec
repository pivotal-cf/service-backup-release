---
name: service-backup

description: |
  Service Backup provides ability to upload the backup produced by a service
  to an S3-API-compatible blobstore.

templates:
  ctl.erb: bin/ctl

packages:
- python
- aws-cli
- service-backup

properties:

  ################################# BACKUP #################################

  service-backup.blobstore.endpoint_url:
    default: https://s3.amazonaws.com
    description: URL of the blobstore endpoint. Override this to use an S3-compatible blobstore like RiakS2.

  service-backup.blobstore.bucket_name:
    description: Bucket to which backups are uploaded

  service-backup.blobstore.bucket_path:
    description: Path in bucket to which backups are uploaded

  service-backup.blobstore.access_key_id:
    description: AWS Access Key to access the blobstore

  service-backup.blobstore.secret_access_key:
    description: AWS Secret Access Key to access the blobstore

  service-backup.source_folder:
    description: Local path from which backups are uploaded. All files in here are uploaded.

  service-backup.source_executable:
    description: Local executable to create backups. Tokens are split on spaces; first is command to execute and remaining are passed as args to command.

  service-backup.cleanup_executable:
    description: Local executable to cleanup backups. Tokens are split on spaces; first is command to execute and remaining are passed as args to command.
    default: ""
