---
name: service-backup

director_uuid: dc4e8b29-2f3a-4051-8b66-39193791a57b

releases:
- name: service-backup
  version: latest

properties:
  service-backup:
    destinations:
      - type: s3
        config:
          endpoint_url: some-url
          bucket_name: test
          bucket_path: foo/bar
          access_key_id: key
          secret_access_key: itsasecret
    source_folder: /foo
    source_executable: whoami
    cron_schedule: '*/5 * * * * *'
    cleanup_executable: somecleanup
    missing_properties_message: custom message
    alerts:
      product_name: MySQL
      cloud_controller:
        url: https://api.cf.com
        user: admin
        password: password
      notification_target:
        url: https://notifcations.cf.com
        skip_ssl_validation: false
        cf_org: system
        cf_space: mysql-notifications
        reply_to: me@example.com
        authentication:
          uaa:
            url: https://10.10.10.10:5493
            client_id: admin
            client_secret: password
      timeout_seconds: 60

jobs:
- name: service-backup
  instances: 1
  resource_pool: service-backup
  networks:
  - name: service-backup
  templates:
  - {release: service-backup, name: service-backup}

networks:
- name: service-backup
  subnets:
  - range: 10.244.8.0/30
    reserved: [10.244.8.1]
    cloud_properties: {}
  - range: 10.244.8.4/30
    reserved: [10.244.8.5]
    cloud_properties: {}

resource_pools:
- name: service-backup
  network: service-backup
  cloud_properties: {}
  stemcell:
    name: bosh-warden-boshlite-ubuntu-trusty-go_agent
    version: latest

compilation:
  workers: 1
  network: service-backup
  cloud_properties: {}

update:
  canaries: 1
  max_in_flight: 1
  serial: false
  canary_watch_time: 1000-60000
  update_watch_time: 1000-60000
